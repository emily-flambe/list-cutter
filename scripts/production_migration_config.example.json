{
  "migration_name": "Production Django to R2 Migration",
  "description": "Zero-downtime migration of Django media files to Cloudflare R2 storage",
  "version": "1.0.0",
  
  "environment": {
    "target_env": "production",
    "maintenance_window": {
      "start_time": "2024-01-15T02:00:00Z",
      "duration_hours": 4,
      "timezone": "UTC"
    }
  },
  
  "database": {
    "postgres_config": {
      "host": "${POSTGRES_HOST}",
      "port": 5432,
      "database": "${POSTGRES_DB}",
      "user": "${POSTGRES_USER}",
      "password": "${POSTGRES_PASSWORD}",
      "sslmode": "require",
      "connect_timeout": 30
    },
    "d1_config": {
      "api_endpoint": "${D1_API_ENDPOINT}",
      "api_token": "${D1_API_TOKEN}",
      "database_id": "${D1_DATABASE_ID}",
      "sqlite_path": "./d1_local.db"
    }
  },
  
  "storage": {
    "r2_config": {
      "api_endpoint": "${R2_API_ENDPOINT}",
      "api_token": "${R2_API_TOKEN}",
      "bucket_name": "${R2_BUCKET_NAME}",
      "region": "auto",
      "upload_timeout": 300,
      "max_retries": 3
    },
    "django_media_root": "${DJANGO_MEDIA_ROOT}",
    "backup_location": "${BACKUP_LOCATION}"
  },
  
  "workers": {
    "api_endpoint": "${WORKERS_API_ENDPOINT}",
    "api_token": "${WORKERS_API_TOKEN}",
    "deployment_name": "cutty-api"
  },
  
  "migration_settings": {
    "batch_size": 50,
    "max_workers": 10,
    "max_retries": 3,
    "retry_delay": 5,
    "rate_limit_mbps": 100,
    "chunk_size": 8192,
    "dual_write_enabled": true,
    "cutover_validation_time": 300,
    "rollback_timeout": 1800
  },
  
  "validation": {
    "level": "comprehensive",
    "integrity_check_enabled": true,
    "checksum_verification": true,
    "performance_validation": true,
    "accessibility_testing": true,
    "database_consistency_check": true
  },
  
  "monitoring": {
    "enabled": true,
    "system_check_interval": 30,
    "migration_check_interval": 10,
    "progress_update_interval": 30,
    "dashboard_enabled": true,
    "metrics_retention_days": 30
  },
  
  "notifications": {
    "email": {
      "enabled": true,
      "smtp_server": "${SMTP_SERVER}",
      "smtp_port": 587,
      "use_tls": true,
      "username": "${SMTP_USERNAME}",
      "password": "${SMTP_PASSWORD}",
      "from": "${NOTIFICATION_FROM_EMAIL}",
      "to": [
        "${NOTIFICATION_TO_EMAIL}"
      ]
    },
    "slack": {
      "enabled": false,
      "webhook_url": "${SLACK_WEBHOOK_URL}"
    },
    "webhook": {
      "enabled": false,
      "url": "${WEBHOOK_URL}",
      "headers": {
        "Authorization": "Bearer ${WEBHOOK_TOKEN}"
      }
    },
    "sms": {
      "enabled": false,
      "provider": "twilio",
      "account_sid": "${TWILIO_ACCOUNT_SID}",
      "auth_token": "${TWILIO_AUTH_TOKEN}",
      "from_number": "${TWILIO_FROM_NUMBER}",
      "to_numbers": [
        "${EMERGENCY_PHONE_NUMBER}"
      ]
    }
  },
  
  "alerts": {
    "performance_thresholds": {
      "max_error_rate": 0.05,
      "min_throughput": 1.0,
      "max_response_time": 30.0,
      "max_queue_size": 1000
    },
    "escalation_rules": [
      {
        "condition": "error_rate > 0.1",
        "action": "escalate_to_critical",
        "delay_minutes": 5
      },
      {
        "condition": "migration_stalled > 30_minutes",
        "action": "trigger_rollback",
        "delay_minutes": 30
      }
    ]
  },
  
  "disaster_recovery": {
    "enabled": true,
    "auto_rollback_enabled": true,
    "monitoring_interval": 30,
    "failure_threshold": 3,
    "backup_retention_days": 7,
    "recovery_timeout": 3600
  },
  
  "security": {
    "encryption_at_rest": true,
    "encryption_in_transit": true,
    "access_logging": true,
    "audit_trail": true,
    "secure_delete": true
  },
  
  "performance": {
    "connection_pooling": true,
    "max_connections": 100,
    "max_connections_per_host": 10,
    "keep_alive_timeout": 30,
    "compression_enabled": true,
    "parallel_uploads": true
  },
  
  "team": {
    "project_manager": "Project Manager Name",
    "technical_lead": "Technical Lead Name",
    "team_members": [
      "Team Member 1",
      "Team Member 2",
      "Team Member 3"
    ],
    "on_call_contacts": [
      {
        "name": "Primary On-Call",
        "email": "primary@company.com",
        "phone": "+1-555-0001"
      },
      {
        "name": "Secondary On-Call",
        "email": "secondary@company.com",
        "phone": "+1-555-0002"
      }
    ]
  },
  
  "logging": {
    "level": "INFO",
    "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    "file_rotation": true,
    "max_file_size": "100MB",
    "backup_count": 5,
    "log_to_console": true,
    "log_to_file": true,
    "log_directory": "./logs"
  },
  
  "testing": {
    "pilot_migration": {
      "enabled": true,
      "sample_size": 100,
      "test_data_path": "./test_data"
    },
    "load_testing": {
      "enabled": false,
      "concurrent_users": 50,
      "duration_minutes": 10
    }
  },
  
  "cleanup": {
    "archive_original_files": true,
    "archive_location": "${ARCHIVE_LOCATION}",
    "cleanup_temp_files": true,
    "cleanup_delay_hours": 24,
    "verify_before_cleanup": true
  },
  
  "rollback": {
    "strategy": "automatic",
    "trigger_conditions": [
      "error_rate > 0.15",
      "integrity_failures > 10",
      "performance_degradation > 50%"
    ],
    "rollback_timeout": 1800,
    "preserve_progress": true,
    "notification_required": true
  },
  
  "compliance": {
    "data_retention_policy": "7_years",
    "audit_requirements": true,
    "gdpr_compliance": true,
    "encryption_standards": "AES-256"
  },
  
  "custom_checklist_items": [
    {
      "id": "custom_001",
      "title": "Notify External Partners",
      "description": "Send notifications to external API partners about potential service interruption",
      "phase": "preparation",
      "criticality": "medium",
      "estimated_duration": 15,
      "automated": false
    }
  ],
  
  "skip_checklist_items": [
    
  ],
  
  "feature_flags": {
    "enable_parallel_processing": true,
    "enable_advanced_monitoring": true,
    "enable_real_time_dashboard": true,
    "enable_automated_rollback": true,
    "enable_performance_optimization": true
  }
}